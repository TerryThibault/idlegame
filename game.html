<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>
<div class="w3-row">
<div class="w3-row">
  <div class="w3-container w3-third">
    <div onclick="mineDust()" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Mine Dust</div><br>
    <div onclick="buy(people)" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Hire Person</div><br>
    <div onclick="buy(robots)" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Buy Mining Robot</div><br>
    <div onclick="buy(dustRockets)" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Buy Dust Harvesting Rocket</div><br>
    <div onclick="buy(lasers)" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Buy Mining Laser</div><br>
    <div onclick="buy(planetDestroyers)" class="w3-bar-item w3-button w3-border w3-block w3-ripple">Buy Planet Destroyer</div><br>
  </div>
  <div class="w3-container w3-twothird">
    <p id="announcements"></p>
    <p id="total"></p>
    <p id="resources"></p>
  </div>
  
</div>


<script>
// Production sources {number of sources, level of the sources, price, income per resource}
var updateRate = 200;
window.setInterval(updateMoney, updateRate);
var resources = []
var newResource = function (name, number, level, price, income) {
	this.number = number;
	this.level = level;
	this.price = price;
	this.income = income;
	resources.push(this);
}

var spacedust = 0;
var income = 0;
var multiplier = .10; // amount by which price increases each purchase
var annoucementTimeout = 5000;

var people = newResource("people", 0, 0, 10, .10);
var robots = newResource("robots", 0, 0, 100, 1);
var dustRockets = newResource("dust rockets", 0, 0, 1000, 50);
var lasers = newResource("mining lasers", 0, 0, 10000, 1000);
var planetDestroyers = newResource("planet destroyers", 0, 0, 100000, 100000);

function updateMoney() {
    spacedust += income / (1000 / updateRate);
    document.getElementById("total").innerHTML = spacedust;
}

function mineDust() {
    spacedust += 1;
    updateMoney();
}

function clearAnnouncement() {
document.getElementById("announcements").innerHTML = "";
}

function buy(resource) {
	if (spacedust >= resource.price) {
		spacedust -= resource.price;
		resource.number++;
		resource.price += resource.price * multiplier;
		document.getElementById("announcements").innerHTML = "Successfully purchased: " + resource.name + ". Now you have: " + resource.number;
		updateMoney();
	} 
  else { 
		document.getElementById("announcements").innerHTML = "Error: Not enough space dust!"; 
setTimeout(clearAnnouncement, annoucementTimeout);
	}
}

for (let resource of resources) {
	document.write("<p id=\"" + resource.name + "\"></p>");
}
</script>
